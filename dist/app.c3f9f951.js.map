{"version":3,"sources":["js/keys.js","js/app.js"],"names":["newsKey","nyTimesKey","newsSources","renderRows","data","index","article","document","createElement","innerHTML","img","url","title","author","classList","add","getElementById","appendChild","addEventListener","onClick","popUp","remove","renderSources","i","string","splitter","split","cleanName","source","retrieveData","apiKey","rawResponse","fetch","ok","Error","message","status","jsonResponse","json","err","console","log","normalizeData","ArticleObj","length","cleanData","articles","forEach","result","push","urlToImage","children","thumbnail","results","byline","multimedia","init","sources","parent","firstChild","removeChild","promises","newsData","Promise","all","initSingle","style","display"],"mappings":"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","file":"app.c3f9f951.js","sourceRoot":"..","sourcesContent":["export const newsKey = '214b0c558498448797163c59349a0165';\nexport const nyTimesKey = 'pAHxmpq5mr6pevxYnc3IA9NogLs8msA1'","// heavy on comments. might be a bit overkill, but i personally can't do without the comments!! \n// when adding new sources, the only hard code required is inside normalizeData\n// the source will automatically be listed with this split function\n// didn't feel comfortable with all the getelement or getclass by id, but we used it so much for this project, i feel good about it\n// really had to be at least familiar with the html and css file, had to search in css file to be familiar, and then google searched\n\n\n// DON'T FORGET TO LOCALHOST!!!!!!!!!\n// for every new newSource, the only functions that needs hard-editing is normalizeData(data)\n\nimport { newsKey } from './keys.js';\nlet newsSources = [\n  `https://newsapi.org/v2/top-headlines?country=us&apiKey=${process.env.NEWS_KEY}`,\n  'https://www.reddit.com/top.json',\n  `https://api.nytimes.com/svc/topstories/v2/us.json?api-key=${process.env.NYTIMES_KEY}`\n  \n];\n//-------------------------------------------------------------------\nfunction renderRows(data, index) {\n  \n  // Vanilla js way\n  let article = document.createElement('article');\n  article.innerHTML = `\n      <section class=\"featuredImage\">\n        <img id=\"popUpToggle${index}\" src=\"${data.img}\" alt=\"\" />\n      </section>\n      <section class=\"articleContent\">\n          <a href=\"${data.url}\"><h3>${data.title}</h3></a>\n          <h6>Author - ${data.author}</h6>\n      </section>\n      <section class=\"impressions\">\n        526\n      </section>\n      <div class=\"clearfix\"></div>\n  `;\n  article.classList.add('article')\n  document.getElementById('main').appendChild(article);\n\n  // event listener for the icon \n  document.getElementById(`popUpToggle${index}`).addEventListener('click', function onClick() {\n    \n    // create popup content\n    let popUp = document.createElement('div');\n    popUp.innerHTML = `\n    <a href=\"#\" id=\"closePopUp\">X</a>\n      <div class=\"container\">\n        <h1>${data.title}</h1>\n        <p>\n          Article description/content here.\n        </p>\n        <a href=\"${data.url}\" class=\"popUpAction\" target=\"_blank\">Read more from source</a>\n      </div>    \n    `\n    \n    // add this to the popup\n    document.getElementById('popUp').appendChild(popUp);\n    \n    // remove the hidden class to make it show\n    document.getElementById('popUp').classList.remove(\"hidden\", \"loader\");\n\n    // event listener for x button on each pop up\n    document.getElementById(\"closePopUp\").addEventListener('click', function onClick() {\n    \n      // clearing the popup for the next popup to have a clean slate\n      \n      //*** below will not work bc there's nothing to grab in the document\n      // document.getElementById('popUp').removeChild(document.getElementById('popUp').firstChild)\n      \n      // need to clear the innerHTML for the popup content I just added \n      popUp.innerHTML = ''\n\n      // add hidden class to remove the popup\n      document.getElementById('popUp').classList.add(\"hidden\");\n\n    });\n\n  });\n  \n}\n//-------------------------------------------------------------------\nfunction renderSources(data, i) {\n\n  //console.log(typeof data) --> Object?!?!?!?!?\n\n  // why do i have to do this? why is each element inside newsSources consdiered an object, not a string?\n  let string = data + '';\n  let splitter = string.split('/');\n  let cleanName = splitter[2]\n\n  // Vanilla js way\n  let source = document.createElement('li');\n  \n  // do i need <li></li> again here?\n  source.innerHTML = `\n    <li id=source${i}><a href=\"#\">${cleanName}</a></li>\n  `;\n  document.getElementById('sources').appendChild(source);  \n}\n//-------------------------------------------------------------------\nasync function retrieveData(url, apiKey) {\n  try {\n    const rawResponse = await fetch(url);\n\n    if (!rawResponse.ok) {\n      throw new Error(rawResponse.message);\n    }\n\n    if (rawResponse.status === 404) {\n      throw new Error('Not found');\n    }\n\n    const jsonResponse = await rawResponse.json();\n    return jsonResponse;\n  } catch (err) {\n    console.log('err', err);\n  }\n}\n//-------------------------------------------------------------------\nfunction normalizeData(data) {\n  function ArticleObj(title, author, url, img) {\n    this.title = title;\n    this.author = author;\n    this.url = url;\n    this.img = img;\n    //impressions\n    //category\n  }\n  for (let i = 0; i < data.length; i++) {\n    let cleanData = [];\n\n    // newsapi\n    if(i === 0) {\n      data[i].articles.forEach(function(result) {\n        cleanData.push(new ArticleObj(result.title, result.author, result.url, result.urlToImage));\n      });\n      data[i] = cleanData;\n    \n    // reddit\n    } else if(i === 1) {\n      data[i].data.children.forEach(function(result) {\n        cleanData.push(new ArticleObj(result.data.title, result.data.author, result.data.url, result.data.thumbnail));\n      });\n      data[i] = cleanData;\n    \n\n    // NYT\n    } else if(i === 2) {\n      data[i].results.forEach(function(result) {\n        cleanData.push(new ArticleObj(result.title, result.byline, result.url, result.multimedia[1].url));\n      });\n      data[i] = cleanData;\n    }\n\n  }\n  return data;\n}\n//-------------------------------------------------------------------\nasync function init(sources) {\n  // step 0 delete all childnodes of \"main\"\n  let parent = document.getElementById('main')\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild)\n  }\n  \n  \n  // step 1 retrieve data\n  let promises = [];\n  for (let i = 0; i < sources.length; i++) {\n    promises.push(retrieveData(sources[i]));\n  }\n  \n  const newsData = await Promise.all(promises);\n  \n  // step 2 normalize data\n  let cleanData = normalizeData(newsData);\n\n  // step 3 render to dom\n  cleanData.forEach(function(sources, i) {\n    sources.forEach(function(articles, index)  {\n      renderRows(articles, i + \"\" + index);\n    });\n  });\n\n  document.getElementById('sourceName').innerHTML = \"\"\n}\n//-------------------------------------------------------------------\n// not happy about having to duplicate almost every line of init just to accomplish running a single element of cleanData at a time\n// this function will only be called when individual sources are clicked\nasync function initSingle(sources, i) {\n\n  // step 0 delete all childnodes of \"main\"\n  let parent = document.getElementById('main')\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild)\n  }\n  \n  // step 1 retrieve data\n  let promises = [];\n  for (let i = 0; i < sources.length; i++) {\n    promises.push(retrieveData(sources[i]));\n  }\n  \n  const newsData = await Promise.all(promises);\n  \n  // step 2 normalize data\n  let cleanData = normalizeData(newsData);\n\n  // step 3 render to dom\n  cleanData[i].forEach(function(articles) {\n    renderRows(articles);\n  });\n\n  // step 4 change source name in search bar\n  let string = sources[i] + '';\n  let splitter = string.split('/');\n  let cleanName = splitter[2]\n  document.getElementById('sourceName').innerHTML = \": \" + cleanName\n\n}\n//-----------------------------------main--------------------------------\n// on page load\n\n// render source list\nfor (let i = 0; i < newsSources.length; i++) {\n  renderSources(newsSources[i], i)\n}\n\n// render all news source articles\ninit(newsSources);\n\n// add event listeners for each source in the drop down\nfor(let i = 0; i < newsSources.length; i++) {\n  // is this just fancy notation? could i have used a normal function notation?\n  document.getElementById(`source${i}`).addEventListener('click', () => initSingle(newsSources, i));\n}\n\n// add event listener for magnifying glass\ndocument.getElementById('search').addEventListener('click', () => {\n  if (document.getElementById(\"sources\").style.display === \"inherit\") {\n    document.getElementById(\"sources\").style.display = \"\";    \n  } \n  \n  else {\n    document.getElementById(\"sources\").style.display = \"inherit\";\n  }\n});\n\n// add event listener for \"Allan\"\ndocument.getElementById('home').addEventListener('click', () => init(newsSources));\n\n\n// popup toggle for every icon clicked\n// renderrows hasn't finished running by the time i'm getting element by class name \"popUpToggle\"\n\n// console.log(document.getElementsByClassName('popUpToggle'))\n\n// left to do:\n// break down functions\n// make unique click possible for individual page loads\n\n\n"]}